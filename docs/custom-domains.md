
---
layout: fandogh
id: custom-domains
title: دامنه دلخواه‌
sidebar_label: دامنه دلخواه
---

## دامنه
به هر گروه از پرینترها یا رایانه ها یا هر چیزی که بر روی بستر شبکه  با هم تعامل دارند و داده رد و بدل می کنند **دامنه** یا **Domain** گفته می شود.
دامنه وظیفه مدیریت تمام تعاملات داخلی و حفظ امنیت آن گروه را بر عهده دارد.
هر دامنه دارای یک نام می باشد و شما روزانه صدها نمونه از این نام ها را مشاهده می کنید مانند **fandogh.cloud** یا **docs.fandogh.cloud** و خیلی موارد دیگر. به این نام ها **hostname** گفته می شود که پشت آن یک **IP** وجود دارد.
این قابلیت نامگذاری به شما این امکان را می دهد تا hostname دلخواه خودتان را انتخاب کنید تا کاربران از طریق این آدرس به سایت شما دسترسی داشته باشند.

## منظور از دامنه دلخواه چیست؟
![Fandogh Domains](/img/docs/domains.png "Fandogh Domains")

فندق به طور پیشفرض به سرویس‌های **غیر داخلی** یا همان **Non-Internal** شما یک hostname مثل
 `serviceName-NameSpace.fandogh.cloud` اختصاص می‌دهد. اما در موارد زیادی کاربر نیاز دارد که یک hostname اختصاصی از روی domain خود بسازد و از طریق آن به سرویس خود دسترسی پیدا کند.\
به عنوان مثال  شما مالک دامنه some-project.com ‌هستید و شاید بخواهید api.some-project.com را به سرویس api خود متصل کنید، یا اینکه some-project.com را به سرویسی به نام front-web متصل کنید.\
برای اینکار ما نیاز داریم ابتدا مطمئن شویم که شما مالک دامنه هستید، بعد از این کار شما می‌توانید از دامنه به راحتی برای سرویس‌های خود استفاده کنید.
## افزودن و احراز مالکیت دامنه
پروسه اثبات مالکیت بسیار ساده است، ما یک key در اختیار شما قرار میدهیم و شما باید آن key را در قالب یک TXT record در NS خود ست کنید، ما رکورد را بررسی می‌کنیم اگر وجود داشته باشد یعنی شما مالک دامنه هستید.

> البته اگر قبلا مثلا مالکیت خود را روی example.com اثبات کرده باشید
> دیگری برای افزودن sub.example.com نیازی به تایید ندارید.

برای افزودن دامنه ابتدا `fandogh domain add` را اجرا کنید، نام دامنه را بنویسید و سپس keyای که در اختیار شما قرار داده می‌شود را به عنوان TXT record در NS خود ثبت کنید و entry (یا return) را فشار دهید.\
اگر رکورد به درستی ست شده باشد دامنه روی حساب کاربری شما فعال می‌شود و می‌توانید هنگام ساخت سرویس آن را با `h-` یا `hosts--` استفاده کنید.

> در صورتی که هنگام اضافه کردن نام دامنه٬ موفق به ثبت TXT record نشده باشید می توانید در هر زمان با استفاده از دستور `fandogh domain verify --name DOMAIN_NAME` این کار را انجام دهید.

## ساخت رکورد CNAME
ست کردن نام دامنه یا Hostname با سویچ `hosts--` به تنهایی باعث نمی‌شود که درخواست‌های HTTP کاربران حتما به سرویس شما روی سکوی فندق برسند، طبیعتا درخواست‌های HTTP کاربران شما باید اول به سرور‌های فندق برسند تا بعد ما با استفاده از هِدِر Hostای که ست شده است درخواست را به سرویس مورد نظر برسانیم.\
برای این کار لازم است یک رکورد [CNAME](https://en.wikipedia.org/wiki/CNAME_record) روی دامنه مورد نظر خود بسازید که به سمت hostname سرویس شما در فندق اشاره می‌کند.\
به عنوان مثال اگر نام namespace شما banana باشد و نام سرویس شما happy باید روی دامنه خود یک رکورد CNAME به آدرس
`happy-banana.fandogh.cloud` ایجاد کنید.\


##  مدیریت دامنه ها

کلیه دستورات مربوط به بخش domain در ادامه توضیح داده شده اند.

>شما همچنین می توانید با وارد کردن دستور`fandogh domain --help` در CLI لیست دستورات موجود را مشاهده کنید.

###  add :
با استفاده از دستور  `fandogh domain add --name DOMAIN_NAME`  می توانید یک نام دامنه جدید به دامنه های خود اضافه کنید.
* name-- :
پارامتر name نمایانگر نام دامنه ای می باشد که میخواهید اضافه کنید.

###  verify :
با استفاده از دستور `fandogh domain verify --name DOMAIN_NAME` می توانید هر دامنه ای را که تا به حال احراز مالکیت نکرده اید را٬ احراز نمایید.
* name-- :
پارامتر name نمایانگر نام دامنه ای می باشد که میخواهید بر آن احراز مالکیت کنید.
###  details :
با استفاده از دستور `fandogh domain details --name DOMAIN_NAME` می توانید جزئیات اطلاعات مربوط به هر دامنه را مشاهده نمایید.
* name-- :
پارامتر name نمایانگر نام دامنه ای می باشد که میخواهید جزئیات اطلاعات آن را مشاهده کنید.
###  delete :
با استفاده از دستور `fandogh domain delete --name DOMAIN_NAME` می توانید هر دامنه ای که در لیست دامنه های خود دارید حذف کنید.
* name-- یا n- :
پارامتر name یا n- نمایانگر نام دامنه ای می باشد که میخواهید حذف کنید.
###  list :
با استفاده از دستور `fandogh domain list` می توانید لیست دامنه هایی که ثبت کرده اید را مشاهده کنید.

###  request-certificate :
با استفاده از دستور `fandogh domain request-certificate --name DOMAIN_NAME`  برای هر کدام از دامنه های خود درخواست صدور گواهی SSL ثبت کنید.
> توجه داشته باشید این روند چند دقیقه به طول می انجامد٬لذا اگر در ابتدا تغییری مشاهده نکردید دلیل بر انجام نشدن نمی باشد.
* name-- :
پارامتر name نمایانگر نام دامنه ای می باشد که میخواهید بر آن گواهی SSL صادر شود.
###  revoke-certificate :
با استفاده از دستور `fandogh domain revoke-certificate --name DOMAIN_NAME` می توانید تمامی گواهی های صادر شده برای یک دامنه را حذف کنید.
* name-- :
پارامتر name نمایانگر نام دامنه ای می باشد که میخواهید گواهی های آن حذف گردد.
